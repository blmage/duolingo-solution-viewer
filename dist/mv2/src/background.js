!function(){"use strict";const e=function(e){const n="string"==typeof e?n=>n&&"object"==typeof n&&void 0!==n[e]?n[e]:n:null,t=e=>{let t,r,o,i,s,a=0;return function(){for(o||(o=[].sort.call(arguments,((e,n)=>e.length-n.length)),r=o.length-1,i=[],s=new Map,a=0,t=0);a<=r;a++){const l=o[a].length;for(;t<l;){const l=o[a][t],c=n?n(l):l;if(s.get(c)===a-1)if(a===r){if(i[i.length]=l,s.set(c,0),e)return t++,{value:l}}else s.set(c,a);else 0===a&&s.set(c,0);t++}t=0}return o=null,e?{done:!0}:i}},r=t();return r.iterable=function(...e){const n=t(!0);let r;return{next:()=>r?n():(r=!0,n(...e)),[Symbol.iterator](){return this}}},r}(!0);function n(e,t={}){if(!(this&&"object"==typeof this&&this instanceof n))return new n(e,t);this.collections=e||[],Object.defineProperty(this,"length",{set:function(){},get:function(){let e=1;return this.collections.forEach((function(n){e*=n.length})),e}}),Object.defineProperty(this,"size",{set:function(){},get:function(){return this.length}}),Object.defineProperty(this,"_options",{value:Object.assign({},t)}),Object.defineProperty(this,"_cache",{configurable:!0,value:{}})}function t(e,n,r,o,i,s,a,l,c){var u=r[e],f=r.length-1,h=o[e];if(e==f)for(var p=0;p<h;++p){if(i[e]=u[p],!a||a(i)){var d=i.slice(0);!l||(l[n]=d),s(d,n,c)}n++}else for(p=0;p<h;++p)i[e]=u[p],t(e+1,n,r,o,i,s,a,l,c);i.pop()}n.prototype.asGenerator=function(){const e=this,n=function*e([n,...t]){if(void 0===n)return;const r=t.length>0?e(t):[[]];for(let e of r)for(let t of n)yield[t,...e]}(this.collections);return Object.defineProperty(n,"length",{get:()=>e.length}),n},n.prototype.asArrayLike=function(){const e=this;return new Proxy([],{get:(n,t)=>"length"===t?e.length:"number"==typeof t?e.get(t):n[t]})},n.prototype.add=function(...e){var n=this;return e.forEach((function(e){n.collections.push(e)})),this.flush(),n},n.prototype.push=function(e,n){return this.collections[e].push(n),this.flush(),this},n.prototype.flush=function(e){"number"==typeof e?delete this._cache[e]:Object.defineProperty(this,"_cache",{configurable:!0,value:{}})},n.prototype.get=function(e,{test:n,cache:t}={}){var r=this,o=[],i=1,s=this._cache[e];if(void 0!==s)return s;for(var a,l=[],c=1,u=r.collections.length;u--;c*=a)l[u]=[c,a=r.collections[u].length],i*=r.collections[u].length;return e>=i||(function(e,n,t,r){for(var o=n.length;o--;)r[o]=n[o][(e/t[o][0]<<0)%t[o][1]]}(e,r.collections,l,o),s=o.slice(0),n&&!n(o))?void 0:((!0===t||this._options.cache)&&(this._cache[e]=s),s)},n.has=function(e,{cache:n}={}){return this.get(e,{cache:n})>=0},n.prototype.indexable=function(){return new Proxy(this,{get(e,n){var t=parseInt(n);return t>=0?e.get(t):e[n]}})},n.prototype.indexOf=function(e,{cache:n}={}){for(var t,r=this,o=0,i=[],s=1,a=r.collections.length;a--;s*=t)i[a]=s,t=r.collections[a].length;return r.collections.every((function(n,t){var r=n.indexOf(e[t]);return r>=0&&(o+=r*i[t],!0)}))?((!0===n||this._options.cache)&&(this._cache[o]=e.slice(0)),o):-1},n.prototype.intersection=function(t){var r=[];return this.collections.length!==t.collections.length?new n([],this._options):(this.collections.forEach((function(n,o){r.push(e(n,t.collections[o]))})),new n(r,this._options))},n.prototype.verify=function(e,n,{cache:t}={}){var r=this.get(e,{cache:t});return r&&r.every((function(e,t){return e===n[t]}))},n.prototype.forEach1=function(e,{test:n,cache:r}={}){for(var o=this,i=[],s=o.collections.length;s--;)i[s]=o.collections[s].length;t(0,0,o.collections,i,[],e,n,r?this._cache:null,o)},n.prototype.forEach2=function(e,n){var t=0;do{var r=this.get(t,n);void 0!==r&&e(r,t,cxproduct),t++}while(void 0!==r)},n.prototype.forEach=n.prototype.forEach1;const r=e=>e,o=e=>"string"==typeof e,i=Array.isArray,s=e=>"object"==typeof e&&!!e&&!i(e),a=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),l=(e,n)=>e>n,c=(e,n)=>((e,n,t)=>{let r,o;if(i(e))for(let i=0,s=e.length;i<s;i++){const s=n(e[i]);(void 0===o||t(s,o))&&(r=e[i],o=s)}return r})(e,n,l),u=e=>((e,n)=>{const t=c(e,n);return void 0===t?t:n(t)})(e,r),f=(e,n)=>e.reduce(((e,t)=>e+n(t)),0),h=(e,n)=>{const t={};for(let r=0,o=e.length;r<o;r++){const o=e[r],i=String(n(o));i in t||(t[i]=[]),t[i].push(e[r])}return t};function p(e,n,t=r){if(e.length<=1)return e.slice();const o=[];let i=0,s=t(e[0]);for(let r=1,a=e.length;r<a;r++){const a=t(e[r]),l=s!==a?0:n(e[i],e[r],s);-1!==l&&(0===l&&o.push(e[i]),s=a,i=r)}return o.push(e[i]),o}const d=(e,...n)=>{const t=new Map,[r,...o]=n;for(const[e,n]of r)t.set(e,n);for(const n of o)for(const[r,o]of n){const n=t.get(r);t.set(r,void 0===n?o:e(n,o))}return t},g=e=>`__duo-toolbox__-${e}`,m=g("action_request"),v=g("ui_event_notification");function y(e,n=!0,t=!1){let r=t?e.normalize("NFD").replace(/\p{M}/gu,""):e;return r=r.normalize("NFC"),n?r.trim().replace(/(\s)\1+/g,"$1"):r}function w(e,n,t){return e.localeCompare(n,t,{ignorePunctuation:!0,numeric:!0,sensitivity:"accent",usage:"sort",caseFirst:"upper"})}function x(e){const n=e.match(/([\p{L}\p{N}]+)/gu);return n?Array.from(n):[]}const C=e=>{const n=new Map;if(e.length<=2)n.set(e,(n.get(e)||0)+1);else for(let t=0,r=e.length-1;t<r;t++){const r=e.substring(t,t+2);n.set(r,(n.get(r)||0)+1)}return n},b=["name","translate","partialReverseTranslate","completeReverseTranslation"],k=["listen","listenTap","listenComplete"],S=["name"],A=["listenTap"],N="compact",z="expanded";"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function L(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var j={exports:{}};(function(e){var n=Object.prototype.hasOwnProperty,t=function(e){for(var t,r=0;r<(arguments.length<=1?0:arguments.length-1);r++)if((t=r+1<1||arguments.length<=r+1?void 0:arguments[r+1])&&"object"==typeof t)for(var o in t)n.call(t,o)&&(e[o]=t[o]);return e},r=function(e){var n=e.length;if(!n)return[];if(1===n)return[e[0]];if(2===n)return[e[0],e[1]];if(3===n)return[e[0],e[1],e[2]];for(var t=new Array(n),r=0;r<n;r++)t[r]=e[r];return t},o=function(e,n){var t="function"==typeof n?n:function(e){return function(n,t){if(n.length!==t.length)return!1;for(var r=0,o=n.length;r<o;r++)if(!e(n[r],t[r]))return!1;return!0}}(e);return function(e,n){for(var r=0;r<e.length;r++)if(t(e[r],n))return r;return-1}},i=function(e,n){return e===n||e!=e&&n!=n},s=function(e,n,t){},a=function(e,n,t){for(var r=t;r--;)e[r+1]=e[r];e[0]=n},l=function(e){var n=o(e.isEqual,e.isMatchingKey);return function(t,r){var o=t.keys[0];t.values[0]=t.values[0].then((function(n){return e.onCacheHit(t,e,r),e.onCacheChange(t,e,r),n})).catch((function(e){var r=n(t.keys,o);throw~r&&(t.keys.splice(r,1),t.values.splice(r,1)),e}))}};function c(e,n){if(e.isMemoized)return e;var c=n||{},u=c.isEqual,f=void 0===u?i:u,h=c.isMatchingKey,p=c.isPromise,d=void 0!==p&&p,g=c.maxSize,m=void 0===g?1:g,v=c.onCacheAdd,y=void 0===v?s:v,w=c.onCacheChange,x=void 0===w?s:w,C=c.onCacheHit,b=void 0===C?s:C,k=c.transformKey,S=function(e,n){if(null==e)return{};var t,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)t=i[r],0<=n.indexOf(t)||(o[t]=e[t]);return o}(c,["isEqual","isMatchingKey","isPromise","maxSize","onCacheAdd","onCacheChange","onCacheHit","transformKey"]),A=t({},S,{isEqual:f,isMatchingKey:h,isPromise:d,maxSize:m,onCacheAdd:y,onCacheChange:x,onCacheHit:b,transformKey:k}),N=o(f,h),z=l(A),L=!(!k&&!h),j={keys:[],get size(){return j.keys.length},values:[]},M=j.keys,E=j.values;function O(){var n=arguments,t=L?r(n):n,o=k?k(t):t,i=N(M,o);if(~i)b(j,A,O),i&&(a(M,M[i],i),a(E,E[i],i),x(j,A,O));else{M.length>=m&&(M.pop(),E.pop());var s=L?o:r(t),l=e.apply(this,n);a(M,s,M.length),a(E,l,E.length),d&&z(j,O),y(j,A,O),x(j,A,O)}return E[0]}return Object.defineProperties(O,{cache:{configurable:!0,get:function(){return j}},cacheSnapshot:{configurable:!0,get:function(){return{keys:r(j.keys),size:j.size,values:r(j.values)}}},isMemoized:{configurable:!0,get:function(){return!0}},options:{configurable:!0,get:function(){return A}}}),O}function u(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];if(n.length)return n.reduce((function(e,n){return"function"==typeof e?"function"==typeof n?function(){return e(n.apply(this,arguments))}:e:"function"==typeof n?n:void 0}))}function f(e,n){for(var t=0;t<e.length;t++)if(e[t].key===n)return t;return-1}function h(e,n){var t="function"==typeof n?n:function(n,t){for(var r=0;r<t.length;r++)if(!e(n[r],t[r]))return!1;return!0};return function(e,n){for(var r=0;r<e.length;r++)if(e[r].length===n.length&&t(e[r],n))return r;return-1}}function p(e){return Array.isArray(e)?e:[e]}function d(e,n,t){var r=f(e,n);~r&&(clearTimeout(e[r].timeoutId),t&&e.splice(r,1))}function g(e,n){var t=setTimeout(e,n);return"function"==typeof t.unref&&t.unref(),t}function m(){F.isCollectingStats=!0}function v(e,n){return e?(n/e*100).toFixed(4)+"%":"0%"}function y(e){if(F.isCollectingStats||H||(console.warn('Stats are not currently being collected, please run "collectStats" to enable them.'),H=!0),e){if(!F.profiles[e])return{calls:0,hits:0,usage:"0%"};var n=F.profiles[e];return Object.assign({},n,{usage:v(n.calls,n.hits)})}var t=Object.keys(F.profiles).reduce((function(e,n){return e.calls+=F.profiles[n].calls,e.hits+=F.profiles[n].hits,e}),{calls:0,hits:0});return Object.assign({},t,{profiles:Object.keys(F.profiles).reduce((function(e,n){return e[n]=y(n),e}),{}),usage:v(t.calls,t.hits)})}function w(e,n){return e&&"object"==typeof e&&n.add(e)}function x(e,n,t,r){for(var o,i=0;i<e.length;i++)if(t((o=e[i])[0],n[0],r)&&t(o[1],n[1],r))return!0;return!1}function C(e,n,t,r){for(var o=0;o<e.length;o++)if(t(e[o],n,r))return!0;return!1}function b(e,n){return e===n||e!=e&&n!=n}function k(e){return e.constructor===Object}function S(e){return"function"==typeof e.then}function A(e){return!(!e.$$typeof||!e._store)}function N(e){return function(n){var t=e||n;return function(e,n,r){void 0===r&&(r=K?new WeakSet:Object.create({_values:[],add:function(e){this._values.push(e)},has:function(e){return!!~this._values.indexOf(e)}}));var o=r.has(e),i=r.has(n);return o||i?o&&i:(w(e,r),w(n,r),t(e,n,r))}}}function z(e){var n=[];return e.forEach((function(e,t){return n.push([t,e])})),n}function L(e){var n=[];return e.forEach((function(e){return n.push(e)})),n}function j(e,n,t,r){var o,i=U(e),s=U(n);if(i.length!==s.length)return!1;for(var a=0;a<i.length;a++){if(!C(s,o=i[a],b))return!1;if(!("_owner"===o&&A(e)&&A(n)||t(e[o],n[o],r)))return!1}return!0}function M(e){var n="function"==typeof e?e(t):t;function t(e,t,r){if(b(e,t))return!0;var o=typeof e;if(o!=typeof t||"object"!=o||!e||!t)return!1;if(k(e)&&k(t))return j(e,t,n,r);var i=J(e),s=J(t);if(i||s)return i===s&&function(e,n,t,r){if(e.length!==n.length)return!1;for(var o=0;o<e.length;o++)if(!t(e[o],n[o],r))return!1;return!0}(e,t,n,r);var a=e instanceof Date,l=t instanceof Date;if(a||l)return a==l&&b(e.getTime(),t.getTime());var c=e instanceof RegExp,u=t instanceof RegExp;if(c||u)return c==u&&function(e,n){return e.source===n.source&&e.global===n.global&&e.ignoreCase===n.ignoreCase&&e.multiline===n.multiline&&e.unicode===n.unicode&&e.sticky===n.sticky&&e.lastIndex===n.lastIndex}(e,t);if(S(e)||S(t))return e===t;if(q){var f=e instanceof Map,h=t instanceof Map;if(f||h)return f==h&&function(e,n,t,r){if(e.size!==n.size)return!1;for(var o=z(e),i=z(n),s=0;s<o.length;s++)if(!x(i,o[s],t,r)||!x(o,i[s],t,r))return!1;return!0}(e,t,n,r)}if(R){var p=e instanceof Set,d=t instanceof Set;if(p||d)return p==d&&function(e,n,t,r){if(e.size!==n.size)return!1;for(var o=L(e),i=L(n),s=0;s<o.length;s++)if(!C(i,o[s],t,r)||!C(o,i[s],t,r))return!1;return!0}(e,t,n,r)}return j(e,t,n,r)}return t}function E(e){return function(n){if(e>=n.length)return n;switch(e){case 0:return[];case 1:return[n[0]];case 2:return[n[0],n[1]];case 3:return[n[0],n[1],n[2]];case 4:return[n[0],n[1],n[2],n[3]];case 5:return[n[0],n[1],n[2],n[3],n[4]]}return Array.prototype.slice.call(n,0,e)}}var O={equals:void 0,isDeepEqual:!1,isPromise:!1,isReact:!1,isSerialized:!1,matchesKey:void 0,maxAge:void 0,maxArgs:void 0,maxSize:1/0,onExpire:void 0,profileName:void 0,serializer:void 0,shouldSerializeFunctions:!1,transformArgs:void 0,updateExpire:!1},T=function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];if(n.length)return n.reduce((function(e,n){return"function"==typeof e?"function"==typeof n?function(){n.apply(this,arguments),e.apply(this,arguments)}:e:"function"==typeof n?n:void 0}))},_=function(e,n){return n===O?e:Object.assign({},e,n,{onCacheAdd:T(e.onCacheAdd,n.onCacheAdd),onCacheChange:T(e.onCacheChange,n.onCacheChange),onCacheHit:T(e.onCacheHit,n.onCacheHit),transformArgs:u(e.transformArgs,n.transformArgs)})},P=function(e,n,t,r){var o=n.maxAge,i=n.updateExpire,s="number"==typeof o&&isFinite(o)?function e(n,t,r,o){var i=t.maxAge,s=t.onCacheChange,a=t.onExpire,l=h(r,o);return function(o,c,u){var h=o.keys[0];if(!~f(n,h)){var p=function(){var i=l(o.keys,h),f=o.values[i];~i&&(o.keys.splice(i,1),o.values.splice(i,1),"function"==typeof s&&s(o,c,u)),d(n,h,!0),"function"==typeof a&&!1===a(h)&&(o.keys.unshift(h),o.values.unshift(f),e(n,t,r)(o,c,u),"function"==typeof s&&s(o,c,u))};n.push({expirationMethod:p,key:h,timeoutId:g(p,i)})}}}(e,n,t,r):void 0;return{onCacheAdd:s,onCacheHit:s&&i?function(e,n){var t=n.maxAge;return function(n){var r=n.keys[0],o=f(e,r);~o&&(d(e,r,!1),e[o].timeoutId=g(e[o].expirationMethod,t))}}(e,n):void 0}},F={anonymousProfileNameCounter:1,isCollectingStats:!1,profiles:{}},H=!1,D=function(e){var n=(new Error).stack,t=e.displayName||e.name||"Anonymous "+F.anonymousProfileNameCounter++;if(!n)return t;for(var r,o,i=n.split("\n").slice(3),s=0;s<i.length;s++)if(!~(r=i[s]).indexOf("/moize/")&&!~r.indexOf(" (native)")&&!~r.indexOf(" Function.")){o=r.replace(/\n/g,"\\n").trim();break}return o?t+" "+o:t},$=function(e){return F.isCollectingStats?{onCacheAdd:function(e){var n=e.profileName;return F.profiles[n]||(F.profiles[n]={calls:0,hits:0}),function(){F.profiles[n].calls++}}(e),onCacheHit:function(e){var n=e.profileName;return function(){F.profiles[n].calls++,F.profiles[n].hits++}}(e)}:{}},I=function(e,n){return function(e,n){var t=n.expirations,r=e.options,o=r.isEqual,i=r.isMatchingKey,s=r.onCacheAdd,l=r.onCacheChange,c=r.transformKey,u=h(o,i);e.add=function(n,t){var r=c?c(n):n;~u(e.cache.keys,r)||(e.cache.size>=e.options.maxSize&&(e.cache.keys.pop(),e.cache.values.pop()),e.cache.keys.unshift(r),e.cache.values.unshift(t),s(e.cache,e.options,e),l(e.cache,e.options,e))},e.clear=function(){e.cache.keys.length=0,e.cache.values.length=0,l(e.cache,e.options,e)},e.get=function(n){var t=u(e.cache.keys,c?c(n):n);return~t?e.apply(this,e.cache.keys[t]):void 0},e.getStats=function(){return y(e.options.profileName)},e.has=function(n){return!!~u(e.cache.keys,c?c(n):n)},e.keys=function(){return e.cacheSnapshot.keys},e.remove=function(n){var r=u(e.cache.keys,c?c(n):n);if(~r){var o=e.cache.keys[r];e.cache.keys.splice(r,1),e.cache.values.splice(r,1),l(e.cache,e.options,e),d(t,o,!0)}},e.update=function(n,t){var r=u(e.cache.keys,c?c(n):n);if(~r){var o=e.cache.keys[r];a(e.cache.keys,o,r),a(e.cache.values,t,r),l(e.cache,e.options,e)}},e.values=function(){return e.cacheSnapshot.values}}(e,n),function(e,n){var t=n.expirations,r=n.options,o=n.originalFunction,i=e.options;Object.defineProperties(e,{_microMemoizeOptions:{configurable:!0,get:function(){return i}},expirations:{configurable:!0,get:function(){return t}},expirationsSnapshot:{configurable:!0,get:function(){return t.slice(0)}},isCollectingStats:{configurable:!0,get:function(){return F.isCollectingStats}},isMoized:{configurable:!0,get:function(){return!0}},options:{configurable:!0,get:function(){return r}},originalFunction:{configurable:!0,get:function(){return o}}}),r.isReact&&(e.contextTypes=o.contextTypes,e.defaultProps=o.defaultProps,e.displayName="Moized("+(o.displayName||o.name||"Component")+")",e.propTypes=o.propTypes)}(e,n),e},q="function"==typeof Map,R="function"==typeof Set,K="function"==typeof WeakSet,U=Object.keys,J=Array.isArray,W=(M(N()),M(N(b)),M()),G=M((function(){return b}));function X(e,n,t){return"[ref-"+t+"]"}var B=function(e,n){if(e[0]===n)return 0;for(var t=e.length,r=1;r<t;r++)if(e[r]===n)return r;return-1};function Z(e,n){var t=n||X,r="function"==typeof e,o=[];return function(n,i){if("object"==typeof i)if(o.length){var s=B(o,this)+1;s?o=function(e,n){for(var t=new Array(n),r=0;r<n;r++)t[r]=e[r];return t}(o,s):o[o.length]=this;var a=B(o,i);if(~a)return t.call(this,n,i,a)}else o[0]=i;return r?e.call(this,n,i):i}}function Q(e,n){return"function"==typeof n?""+n:n}function V(e,n){try{return JSON.stringify(e,n)}catch(t){return function(e,n,t,r){return JSON.stringify(e,Z(n,r),t)}(e,n)}}function Y(e){return"function"==typeof e.serializer?u(p,e.serializer):function(e){var n=e.shouldSerializeFunctions?Q:null;return function(e){for(var t,r,o="|",i=0;i<e.length;i++)o+=(r=typeof(t=e[i]),(!t||"object"!=r&&"function"!=r?t:V(t,n))+"|");return[o]}}(e)}function ee(e,n){return e[0]===n[0]}var ne=function(e){if("function"==typeof e)return function(n,t,r){return e(r.cache,r.options,r)}},te=function(e){var n=e.equals,t=e.isDeepEqual,r=e.isReact;return n||t&&W||r&&G||b},re=function(e){var n=e.isSerialized;return e.matchesKey||n&&ee||void 0},oe=function(e){var n=e.maxArgs,t=e.isReact,r=e.isSerialized,o=e.transformArgs;return u(r&&Y(e),"function"==typeof o&&u(p,o),t&&E(2),"number"==typeof n&&E(n))};function ie(e,n){if(void 0===n&&(n=O),e.isMoized)return ie(e.originalFunction,_(e.options,n));if("object"==typeof e)return function(n,t){return void 0===t&&(t={}),"function"==typeof n?ie(n,_(e,t)):ie(_(e,n))};var t=Object.assign({},O,n,{maxArgs:"number"==typeof n.maxArgs&&0<=n.maxArgs?n.maxArgs:O.maxArgs,maxSize:"number"==typeof n.maxSize&&0<=n.maxSize?n.maxSize:O.maxSize,profileName:n.profileName||D(e)}),r=[],o=(t.equals,t.isDeepEqual,t.isPromise),i=(t.isReact,t.isSerialized,t.matchesKey,t.maxAge,t.maxArgs,t.maxSize),s=t.onCacheAdd,a=t.onCacheChange,l=t.onCacheHit,u=(t.onExpire,t.profileName,t.shouldSerializeFunctions,t.serializer,t.transformArgs,t.updateExpire,function(e,n){if(null==e)return{};var t,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)t=i[r],0<=n.indexOf(t)||(o[t]=e[t]);return o}(t,["equals","isDeepEqual","isPromise","isReact","isSerialized","matchesKey","maxAge","maxArgs","maxSize","onCacheAdd","onCacheChange","onCacheHit","onExpire","profileName","shouldSerializeFunctions","serializer","transformArgs","updateExpire"])),f=te(t),h=re(t),p=P(r,t,f,h),d=$(t),g=oe(t),m=Object.assign({},u,{isEqual:f,isMatchingKey:h,isPromise:o,maxSize:i,onCacheAdd:ne(T(s,p.onCacheAdd,d.onCacheAdd)),onCacheChange:ne(a),onCacheHit:ne(T(l,p.onCacheHit,d.onCacheHit)),transformKey:g});return I(c(e,m),{expirations:r,options:t,originalFunction:e})}ie.collectStats=m,ie.compose=function(){return u.apply(null,arguments)||ie},ie.deep=ie({isDeepEqual:!0}),ie.getStats=y,ie.isCollectingStats=function(){return F.isCollectingStats},ie.isMoized=function(e){return"function"==typeof e&&!!e.isMoized},ie.maxAge=function(e){return ie({maxAge:e})},ie.maxArgs=function(e){return ie({maxArgs:e})},ie.maxSize=function(e){return ie({maxSize:e})},ie.promise=ie({isPromise:!0,updateExpire:!0}),ie.react=ie({isReact:!0}),ie.reactSimple=ie({isReact:!0,maxSize:1}),ie.serialize=ie({isSerialized:!0}),ie.simple=ie({maxSize:1}),e.collectStats=m,e.default=ie,Object.defineProperty(e,"__esModule",{value:!0})})(j.exports);var M=L(j.exports),E={exports:{}};function O(e){return null===e?"null":e!==Object(e)?typeof e:{}.toString.call(e).slice(8,-1).toLowerCase()}function T(e){return"string"!==O(e)||!e.length}function _(e="",n,t){if(T(e))return!1;const r=e.charCodeAt(0);return n<=r&&r<=t}
/*!

     diff v4.0.1

    Software License Agreement (BSD License)

    Copyright (c) 2009-2015, Kevin Decker <kpdecker@gmail.com>

    All rights reserved.

    Redistribution and use of this software in source and binary forms, with or without modification,
    are permitted provided that the following conditions are met:

    * Redistributions of source code must retain the above
      copyright notice, this list of conditions and the
      following disclaimer.

    * Redistributions in binary form must reproduce the above
      copyright notice, this list of conditions and the
      following disclaimer in the documentation and/or other
      materials provided with the distribution.

    * Neither the name of Kevin Decker nor the names of its
      contributors may be used to endorse or promote products
      derived from this software without specific prior
      written permission.

    THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR
    IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND
    FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR
    CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
    DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
    DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER
    IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
    OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
    @license
    */
!function(e,n){!function(e){function n(){}function t(e,n,t,r,o){for(var i=0,s=n.length,a=0,l=0;i<s;i++){var c=n[i];if(c.removed){if(c.value=e.join(r.slice(l,l+c.count)),l+=c.count,i&&n[i-1].added){var u=n[i-1];n[i-1]=n[i],n[i]=u}}else{if(!c.added&&o){var f=t.slice(a,a+c.count);f=f.map((function(e,n){var t=r[l+n];return t.length>e.length?t:e})),c.value=e.join(f)}else c.value=e.join(t.slice(a,a+c.count));a+=c.count,c.added||(l+=c.count)}}var h=n[s-1];return s>1&&"string"==typeof h.value&&(h.added||h.removed)&&e.equals("",h.value)&&(n[s-2].value+=h.value,n.pop()),n}function r(e){return{newPos:e.newPos,components:e.components.slice(0)}}n.prototype={diff:function(e,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=o.callback;"function"==typeof o&&(i=o,o={}),this.options=o;var s=this;function a(e){return i?(setTimeout((function(){i(void 0,e)}),0),!0):e}e=this.castInput(e),n=this.castInput(n),e=this.removeEmpty(this.tokenize(e));var l=(n=this.removeEmpty(this.tokenize(n))).length,c=e.length,u=1,f=l+c,h=[{newPos:-1,components:[]}],p=this.extractCommon(h[0],n,e,0);if(h[0].newPos+1>=l&&p+1>=c)return a([{value:this.join(n),count:n.length}]);function d(){for(var o=-1*u;o<=u;o+=2){var i=void 0,f=h[o-1],p=h[o+1],d=(p?p.newPos:0)-o;f&&(h[o-1]=void 0);var g=f&&f.newPos+1<l,m=p&&0<=d&&d<c;if(g||m){if(!g||m&&f.newPos<p.newPos?(i=r(p),s.pushComponent(i.components,void 0,!0)):((i=f).newPos++,s.pushComponent(i.components,!0,void 0)),d=s.extractCommon(i,n,e,o),i.newPos+1>=l&&d+1>=c)return a(t(s,i.components,n,e,s.useLongestToken));h[o]=i}else h[o]=void 0}u++}if(i)!function e(){setTimeout((function(){if(u>f)return i();d()||e()}),0)}();else for(;u<=f;){var g=d();if(g)return g}},pushComponent:function(e,n,t){var r=e[e.length-1];r&&r.added===n&&r.removed===t?e[e.length-1]={count:r.count+1,added:n,removed:t}:e.push({count:1,added:n,removed:t})},extractCommon:function(e,n,t,r){for(var o=n.length,i=t.length,s=e.newPos,a=s-r,l=0;s+1<o&&a+1<i&&this.equals(n[s+1],t[a+1]);)s++,a++,l++;return l&&e.components.push({count:l}),e.newPos=s,a},equals:function(e,n){return this.options.comparator?this.options.comparator(e,n):e===n||this.options.ignoreCase&&e.toLowerCase()===n.toLowerCase()},removeEmpty:function(e){for(var n=[],t=0;t<e.length;t++)e[t]&&n.push(e[t]);return n},castInput:function(e){return e},tokenize:function(e){return e.split("")},join:function(e){return e.join("")}};var o=new n;function i(e,n,t){return o.diff(e,n,t)}function s(e,n){if("function"==typeof e)n.callback=e;else if(e)for(var t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}var a=/^[A-Za-z\xC0-\u02C6\u02C8-\u02D7\u02DE-\u02FF\u1E00-\u1EFF]+$/,l=/\S/,c=new n;function u(e,n,t){return t=s(t,{ignoreWhitespace:!0}),c.diff(e,n,t)}function f(e,n,t){return c.diff(e,n,t)}c.equals=function(e,n){return this.options.ignoreCase&&(e=e.toLowerCase(),n=n.toLowerCase()),e===n||this.options.ignoreWhitespace&&!l.test(e)&&!l.test(n)},c.tokenize=function(e){for(var n=e.split(/(\s+|[()[\]{}'"]|\b)/),t=0;t<n.length-1;t++)!n[t+1]&&n[t+2]&&a.test(n[t])&&a.test(n[t+2])&&(n[t]+=n[t+2],n.splice(t+1,2),t--);return n};var h=new n;function p(e,n,t){return h.diff(e,n,t)}function d(e,n,t){var r=s(t,{ignoreWhitespace:!0});return h.diff(e,n,r)}h.tokenize=function(e){var n=[],t=e.split(/(\n|\r\n)/);t[t.length-1]||t.pop();for(var r=0;r<t.length;r++){var o=t[r];r%2&&!this.options.newlineIsToken?n[n.length-1]+=o:(this.options.ignoreWhitespace&&(o=o.trim()),n.push(o))}return n};var g=new n;function m(e,n,t){return g.diff(e,n,t)}g.tokenize=function(e){return e.split(/(\S.+?[.!?])(?=\s+|$)/)};var v=new n;function y(e,n,t){return v.diff(e,n,t)}function w(e){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w(e)}function x(e){return C(e)||b(e)||k()}function C(e){if(Array.isArray(e)){for(var n=0,t=new Array(e.length);n<e.length;n++)t[n]=e[n];return t}}function b(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function k(){throw new TypeError("Invalid attempt to spread non-iterable instance")}v.tokenize=function(e){return e.split(/([{}:;,]|\s+)/)};var S=Object.prototype.toString,A=new n;function N(e,n,t){return A.diff(e,n,t)}function z(e,n,t,r,o){var i,s;for(n=n||[],t=t||[],r&&(e=r(o,e)),i=0;i<n.length;i+=1)if(n[i]===e)return t[i];if("[object Array]"===S.call(e)){for(n.push(e),s=new Array(e.length),t.push(s),i=0;i<e.length;i+=1)s[i]=z(e[i],n,t,r,o);return n.pop(),t.pop(),s}if(e&&e.toJSON&&(e=e.toJSON()),"object"===w(e)&&null!==e){n.push(e),s={},t.push(s);var a,l=[];for(a in e)e.hasOwnProperty(a)&&l.push(a);for(l.sort(),i=0;i<l.length;i+=1)s[a=l[i]]=z(e[a],n,t,r,a);n.pop(),t.pop()}else s=e;return s}A.useLongestToken=!0,A.tokenize=h.tokenize,A.castInput=function(e){var n=this.options,t=n.undefinedReplacement,r=n.stringifyReplacer,o=void 0===r?function(e,n){return void 0===n?t:n}:r;return"string"==typeof e?e:JSON.stringify(z(e,null,null,o),o,"  ")},A.equals=function(e,t){return n.prototype.equals.call(A,e.replace(/,([\r\n])/g,"$1"),t.replace(/,([\r\n])/g,"$1"))};var L=new n;function j(e,n,t){return L.diff(e,n,t)}function M(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=e.split(/\r\n|[\n\v\f\r\x85]/),r=e.match(/\r\n|[\n\v\f\r\x85]/g)||[],o=[],i=0;function s(){var e={};for(o.push(e);i<t.length;){var r=t[i];if(/^(\-\-\-|\+\+\+|@@)\s/.test(r))break;var s=/^(?:Index:|diff(?: -r \w+)+)\s+(.+?)\s*$/.exec(r);s&&(e.index=s[1]),i++}for(a(e),a(e),e.hunks=[];i<t.length;){var c=t[i];if(/^(Index:|diff|\-\-\-|\+\+\+)\s/.test(c))break;if(/^@@/.test(c))e.hunks.push(l());else{if(c&&n.strict)throw new Error("Unknown line "+(i+1)+" "+JSON.stringify(c));i++}}}function a(e){var n=/^(---|\+\+\+)\s+(.*)$/.exec(t[i]);if(n){var r="---"===n[1]?"old":"new",o=n[2].split("\t",2),s=o[0].replace(/\\\\/g,"\\");/^".*"$/.test(s)&&(s=s.substr(1,s.length-2)),e[r+"FileName"]=s,e[r+"Header"]=(o[1]||"").trim(),i++}}function l(){for(var e=i,o=t[i++].split(/@@ -(\d+)(?:,(\d+))? \+(\d+)(?:,(\d+))? @@/),s={oldStart:+o[1],oldLines:+o[2]||1,newStart:+o[3],newLines:+o[4]||1,lines:[],linedelimiters:[]},a=0,l=0;i<t.length&&!(0===t[i].indexOf("--- ")&&i+2<t.length&&0===t[i+1].indexOf("+++ ")&&0===t[i+2].indexOf("@@"));i++){var c=0==t[i].length&&i!=t.length-1?" ":t[i][0];if("+"!==c&&"-"!==c&&" "!==c&&"\\"!==c)break;s.lines.push(t[i]),s.linedelimiters.push(r[i]||"\n"),"+"===c?a++:"-"===c?l++:" "===c&&(a++,l++)}if(a||1!==s.newLines||(s.newLines=0),l||1!==s.oldLines||(s.oldLines=0),n.strict){if(a!==s.newLines)throw new Error("Added line count did not match for hunk at line "+(e+1));if(l!==s.oldLines)throw new Error("Removed line count did not match for hunk at line "+(e+1))}return s}for(;i<t.length;)s();return o}function E(e,n,t){var r=!0,o=!1,i=!1,s=1;return function a(){if(r&&!i){if(o?s++:r=!1,e+s<=t)return s;i=!0}if(!o)return i||(r=!0),n<=e-s?-s++:(o=!0,a())}}function O(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("string"==typeof n&&(n=M(n)),Array.isArray(n)){if(n.length>1)throw new Error("applyPatch only works with a single input.");n=n[0]}var r,o,i=e.split(/\r\n|[\n\v\f\r\x85]/),s=e.match(/\r\n|[\n\v\f\r\x85]/g)||[],a=n.hunks,l=t.compareLine||function(e,n,t,r){return n===r},c=0,u=t.fuzzFactor||0,f=0,h=0;function p(e,n){for(var t=0;t<e.lines.length;t++){var r=e.lines[t],o=r.length>0?r[0]:" ",s=r.length>0?r.substr(1):r;if(" "===o||"-"===o){if(!l(n+1,i[n],o,s)&&++c>u)return!1;n++}}return!0}for(var d=0;d<a.length;d++){for(var g=a[d],m=i.length-g.oldLines,v=0,y=h+g.oldStart-1,w=E(y,f,m);void 0!==v;v=w())if(p(g,y+v)){g.offset=h+=v;break}if(void 0===v)return!1;f=g.offset+g.oldStart+g.oldLines}for(var x=0,C=0;C<a.length;C++){var b=a[C],k=b.oldStart+b.offset+x-1;x+=b.newLines-b.oldLines,k<0&&(k=0);for(var S=0;S<b.lines.length;S++){var A=b.lines[S],N=A.length>0?A[0]:" ",z=A.length>0?A.substr(1):A,L=b.linedelimiters[S];if(" "===N)k++;else if("-"===N)i.splice(k,1),s.splice(k,1);else if("+"===N)i.splice(k,0,z),s.splice(k,0,L),k++;else if("\\"===N){var j=b.lines[S-1]?b.lines[S-1][0]:null;"+"===j?r=!0:"-"===j&&(o=!0)}}}if(r)for(;!i[i.length-1];)i.pop(),s.pop();else o&&(i.push(""),s.push("\n"));for(var O=0;O<i.length-1;O++)i[O]=i[O]+s[O];return i.join("")}function T(e,n){"string"==typeof e&&(e=M(e));var t=0;function r(){var o=e[t++];if(!o)return n.complete();n.loadFile(o,(function(e,t){if(e)return n.complete(e);var i=O(t,o,n);n.patched(o,i,(function(e){if(e)return n.complete(e);r()}))}))}r()}function _(e,n,t,r,o,i,s){s||(s={}),void 0===s.context&&(s.context=4);var a=p(t,r,s);function l(e){return e.map((function(e){return" "+e}))}a.push({value:"",lines:[]});for(var c=[],u=0,f=0,h=[],d=1,g=1,m=function(e){var n=a[e],o=n.lines||n.value.replace(/\n$/,"").split("\n");if(n.lines=o,n.added||n.removed){var i;if(!u){var p=a[e-1];u=d,f=g,p&&(h=s.context>0?l(p.lines.slice(-s.context)):[],u-=h.length,f-=h.length)}(i=h).push.apply(i,x(o.map((function(e){return(n.added?"+":"-")+e})))),n.added?g+=o.length:d+=o.length}else{if(u)if(o.length<=2*s.context&&e<a.length-2){var m;(m=h).push.apply(m,x(l(o)))}else{var v,y=Math.min(o.length,s.context);(v=h).push.apply(v,x(l(o.slice(0,y))));var w={oldStart:u,oldLines:d-u+y,newStart:f,newLines:g-f+y,lines:h};if(e>=a.length-2&&o.length<=s.context){var C=/\n$/.test(t),b=/\n$/.test(r),k=0==o.length&&h.length>w.oldLines;!C&&k&&h.splice(w.oldLines,0,"\\ No newline at end of file"),(C||k)&&b||h.push("\\ No newline at end of file")}c.push(w),u=0,f=0,h=[]}d+=o.length,g+=o.length}},v=0;v<a.length;v++)m(v);return{oldFileName:e,newFileName:n,oldHeader:o,newHeader:i,hunks:c}}function P(e,n,t,r,o,i,s){var a=_(e,n,t,r,o,i,s),l=[];e==n&&l.push("Index: "+e),l.push("==================================================================="),l.push("--- "+a.oldFileName+(void 0===a.oldHeader?"":"\t"+a.oldHeader)),l.push("+++ "+a.newFileName+(void 0===a.newHeader?"":"\t"+a.newHeader));for(var c=0;c<a.hunks.length;c++){var u=a.hunks[c];l.push("@@ -"+u.oldStart+","+u.oldLines+" +"+u.newStart+","+u.newLines+" @@"),l.push.apply(l,u.lines)}return l.join("\n")+"\n"}function F(e,n,t,r,o,i){return P(e,e,n,t,r,o,i)}function H(e,n){return e.length===n.length&&D(e,n)}function D(e,n){if(n.length>e.length)return!1;for(var t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}function $(e){var n=te(e.lines),t=n.oldLines,r=n.newLines;void 0!==t?e.oldLines=t:delete e.oldLines,void 0!==r?e.newLines=r:delete e.newLines}function I(e,n,t){e=q(e,t),n=q(n,t);var r={};(e.index||n.index)&&(r.index=e.index||n.index),(e.newFileName||n.newFileName)&&(R(e)?R(n)?(r.oldFileName=K(r,e.oldFileName,n.oldFileName),r.newFileName=K(r,e.newFileName,n.newFileName),r.oldHeader=K(r,e.oldHeader,n.oldHeader),r.newHeader=K(r,e.newHeader,n.newHeader)):(r.oldFileName=e.oldFileName,r.newFileName=e.newFileName,r.oldHeader=e.oldHeader,r.newHeader=e.newHeader):(r.oldFileName=n.oldFileName||e.oldFileName,r.newFileName=n.newFileName||e.newFileName,r.oldHeader=n.oldHeader||e.oldHeader,r.newHeader=n.newHeader||e.newHeader)),r.hunks=[];for(var o=0,i=0,s=0,a=0;o<e.hunks.length||i<n.hunks.length;){var l=e.hunks[o]||{oldStart:1/0},c=n.hunks[i]||{oldStart:1/0};if(U(l,c))r.hunks.push(J(l,s)),o++,a+=l.newLines-l.oldLines;else if(U(c,l))r.hunks.push(J(c,a)),i++,s+=c.newLines-c.oldLines;else{var u={oldStart:Math.min(l.oldStart,c.oldStart),oldLines:0,newStart:Math.min(l.newStart+s,c.oldStart+a),newLines:0,lines:[]};W(u,l.oldStart,l.lines,c.oldStart,c.lines),i++,o++,r.hunks.push(u)}}return r}function q(e,n){if("string"==typeof e){if(/^@@/m.test(e)||/^Index:/m.test(e))return M(e)[0];if(!n)throw new Error("Must provide a base reference or pass in a patch");return _(void 0,void 0,n,e)}return e}function R(e){return e.newFileName&&e.newFileName!==e.oldFileName}function K(e,n,t){return n===t?n:(e.conflict=!0,{mine:n,theirs:t})}function U(e,n){return e.oldStart<n.oldStart&&e.oldStart+e.oldLines<n.oldStart}function J(e,n){return{oldStart:e.oldStart,oldLines:e.oldLines,newStart:e.newStart+n,newLines:e.newLines,lines:e.lines}}function W(e,n,t,r,o){var i={offset:n,lines:t,index:0},s={offset:r,lines:o,index:0};for(Z(e,i,s),Z(e,s,i);i.index<i.lines.length&&s.index<s.lines.length;){var a=i.lines[i.index],l=s.lines[s.index];if("-"!==a[0]&&"+"!==a[0]||"-"!==l[0]&&"+"!==l[0])if("+"===a[0]&&" "===l[0]){var c;(c=e.lines).push.apply(c,x(V(i)))}else if("+"===l[0]&&" "===a[0]){var u;(u=e.lines).push.apply(u,x(V(s)))}else"-"===a[0]&&" "===l[0]?X(e,i,s):"-"===l[0]&&" "===a[0]?X(e,s,i,!0):a===l?(e.lines.push(a),i.index++,s.index++):B(e,V(i),V(s));else G(e,i,s)}Q(e,i),Q(e,s),$(e)}function G(e,n,t){var r=V(n),o=V(t);if(ee(r)&&ee(o)){var i,s;if(D(r,o)&&ne(t,r,r.length-o.length))return void(i=e.lines).push.apply(i,x(r));if(D(o,r)&&ne(n,o,o.length-r.length))return void(s=e.lines).push.apply(s,x(o))}else if(H(r,o)){var a;return void(a=e.lines).push.apply(a,x(r))}B(e,r,o)}function X(e,n,t,r){var o,i=V(n),s=Y(t,i);s.merged?(o=e.lines).push.apply(o,x(s.merged)):B(e,r?s:i,r?i:s)}function B(e,n,t){e.conflict=!0,e.lines.push({conflict:!0,mine:n,theirs:t})}function Z(e,n,t){for(;n.offset<t.offset&&n.index<n.lines.length;){var r=n.lines[n.index++];e.lines.push(r),n.offset++}}function Q(e,n){for(;n.index<n.lines.length;){var t=n.lines[n.index++];e.lines.push(t)}}function V(e){for(var n=[],t=e.lines[e.index][0];e.index<e.lines.length;){var r=e.lines[e.index];if("-"===t&&"+"===r[0]&&(t="+"),t!==r[0])break;n.push(r),e.index++}return n}function Y(e,n){for(var t=[],r=[],o=0,i=!1,s=!1;o<n.length&&e.index<e.lines.length;){var a=e.lines[e.index],l=n[o];if("+"===l[0])break;if(i=i||" "!==a[0],r.push(l),o++,"+"===a[0])for(s=!0;"+"===a[0];)t.push(a),a=e.lines[++e.index];l.substr(1)===a.substr(1)?(t.push(a),e.index++):s=!0}if("+"===(n[o]||"")[0]&&i&&(s=!0),s)return t;for(;o<n.length;)r.push(n[o++]);return{merged:r,changes:t}}function ee(e){return e.reduce((function(e,n){return e&&"-"===n[0]}),!0)}function ne(e,n,t){for(var r=0;r<t;r++){var o=n[n.length-t+r].substr(1);if(e.lines[e.index+r]!==" "+o)return!1}return e.index+=t,!0}function te(e){var n=0,t=0;return e.forEach((function(e){if("string"!=typeof e){var r=te(e.mine),o=te(e.theirs);void 0!==n&&(r.oldLines===o.oldLines?n+=r.oldLines:n=void 0),void 0!==t&&(r.newLines===o.newLines?t+=r.newLines:t=void 0)}else void 0===t||"+"!==e[0]&&" "!==e[0]||t++,void 0===n||"-"!==e[0]&&" "!==e[0]||n++})),{oldLines:n,newLines:t}}function re(e){for(var n,t,r=[],o=0;o<e.length;o++)t=(n=e[o]).added?1:n.removed?-1:0,r.push([t,n.value]);return r}function oe(e){for(var n=[],t=0;t<e.length;t++){var r=e[t];r.added?n.push("<ins>"):r.removed&&n.push("<del>"),n.push(ie(r.value)),r.added?n.push("</ins>"):r.removed&&n.push("</del>")}return n.join("")}function ie(e){var n=e;return n=(n=(n=(n=n.replace(/&/g,"&amp;")).replace(/</g,"&lt;")).replace(/>/g,"&gt;")).replace(/"/g,"&quot;")}L.tokenize=function(e){return e.slice()},L.join=L.removeEmpty=function(e){return e},e.Diff=n,e.diffChars=i,e.diffWords=u,e.diffWordsWithSpace=f,e.diffLines=p,e.diffTrimmedLines=d,e.diffSentences=m,e.diffCss=y,e.diffJson=N,e.diffArrays=j,e.structuredPatch=_,e.createTwoFilesPatch=P,e.createPatch=F,e.applyPatch=O,e.applyPatches=T,e.parsePatch=M,e.merge=I,e.convertChangesToDMP=re,e.convertChangesToXML=oe,e.canonicalize=z,Object.defineProperty(e,"__esModule",{value:!0})}(n)}(0,E.exports);const P=12353,F=12438,H=12449,D=12540,$=19968,I=40879,q=12540,R=[65313,65338],K=[65345,65370],U=[65377,65381],J=[[12288,12351],U,[12539,12540],[65281,65295],[65306,65311],[65339,65343],[65371,65376],[65504,65518]],W=[...[[12352,12447],[12448,12543],U,[65382,65439]],...J,R,K,[65296,65305],[19968,40959],[13312,19903]],G=[[0,127],[256,257],[274,275],[298,299],[332,333],[362,363]],X=[[32,47],[58,63],[91,96],[123,126],[8216,8217],[8220,8221]];function B(e=""){return W.some((([n,t])=>_(e,n,t)))}function Z(e=""){return!T(e)&&(!!function(e=""){return!T(e)&&e.charCodeAt(0)===q}(e)||_(e,P,F))}function Q(e=""){return!T(e)&&G.some((([n,t])=>_(e,n,t)))}function V(e=""){return!T(e)&&X.some((([n,t])=>_(e,n,t)))}function Y(e=""){return!T(e)&&J.some((([n,t])=>_(e,n,t)))}Object.assign({tu:"っ",wa:"ゎ",ka:"ヵ",ke:"ヶ"},{a:"ぁ",i:"ぃ",u:"ぅ",e:"ぇ",o:"ぉ"},{ya:"ゃ",yi:"ぃ",yu:"ゅ",ye:"ぇ",yo:"ょ"}),function(e={}){const n={};"object"===O(e)&&Object.entries(e).forEach((([e,t])=>{let r=n;e.split("").forEach((e=>{void 0===r[e]&&(r[e]={}),r=r[e]})),r[""]=t}))}({wi:"ゐ",we:"ゑ"});const ee=e=>" "===e,ne=e=>"　"===e,te=e=>/[０-９]/.test(e),re=e=>/[0-9]/.test(e),oe={EN:"en",JA:"ja",EN_NUM:"englishNumeral",JA_NUM:"japaneseNumeral",EN_PUNC:"englishPunctuation",JA_PUNC:"japanesePunctuation",KANJI:"kanji",HIRAGANA:"hiragana",KATAKANA:"katakana",SPACE:"space",OTHER:"other"};function ie(e,n=!1){const{EN:t,JA:r,EN_NUM:o,JA_NUM:i,EN_PUNC:s,JA_PUNC:a,KANJI:l,HIRAGANA:c,KATAKANA:u,SPACE:f,OTHER:h}=oe;if(n)switch(!0){case te(e):case re(e):return h;case ee(e):return t;case V(e):return h;case ne(e):return r;case Y(e):return h;case B(e):return r;case Q(e):return t;default:return h}else switch(!0){case ne(e):case ee(e):return f;case te(e):return i;case re(e):return o;case V(e):return s;case Y(e):return a;case function(e=""){return _(e,$,I)}(e):return l;case Z(e):return c;case function(e=""){return _(e,H,D)}(e):return u;case B(e):return r;case Q(e):return t;default:return h}}const se=e=>!["ja","zh","zs"].includes(e),ae=(e,n=!1)=>{let t,r={};return t=n?n=>(a(r,n)||(r[n]=e(n)),r[n]):(...n)=>{const t=n.join("");return a(r,t)||(r[t]=e(...n)),r[t]},t.clearCache=()=>{r={}},t},le=ae((function(e,n,t){return e.localeCompare(n,t,{ignorePunctuation:!0,numeric:!0,sensitivity:"variant",usage:"sort",caseFirst:"upper"})})),ce=ae(w),ue=ae(((e,n)=>e.toLocaleLowerCase(n).normalize("NFD").replace(/\p{M}/gu,"").replace(/[^\p{L}\p{N}]/gu,"").normalize("NFC")),!0),fe={en:8,hiragana:1,katakana:4,kanji:2},he=e=>function(e,{compact:n=!1,detailed:t=!1}={}){if(null==e||T(e))return[];const r=[...e];let o=r.shift(),i=ie(o,n);return o=t?{type:i,value:o}:o,r.reduce(((e,r)=>{const o=ie(r,n),s=o===i;i=o;let a=r;return s&&(a=(t?e.pop().value:e.pop())+a),t?e.concat({type:o,value:a}):e.concat(a)}),[o])}(e,{detailed:!0}).map((e=>fe[e.type]??0)).reduce(((e,n)=>e|n),0),pe=ae(he,!0),de=(e,n,t)=>{let r,o=e;if(t&&(o=o.filter((e=>!/[^\s]\s+[^\s]/.test(e)))),"en"===n)o=o.filter((e=>1===e.length||!e.includes("&")||!/(^|[^&\s])&([^&\s]|$)/.test(e)));else if("fr"===n)o=o.filter((e=>"où"===e||"Où"===e||!e.includes("ù")));else if("de"===n){const e=["ä","ö","ü"],n=["ae","oe","ue"];for(let t=0;t<=e.length;t++)o.includes((n=>n.includes(e[t])))&&!o.includes((e=>e.includes[n[t]]))&&(o=o.filter((n=>n.includes(e[t]))))}var i;if([r,o]=((e,n)=>{const t=[[],[]];for(let r=0,o=e.length;r<o;r++)t[n(e[r])?0:1].push(e[r]);return t})(o,(e=>e.includes("i̇"))),"tr"!==n&&(o=o.filter((e=>!e.includes("ı")&&!e.includes("İ")))),0===o.length&&(o=r.map((e=>e.replaceAll("i̇","i").replaceAll("İ","I")))),o.length>1&&(i=o.sort(((e,t)=>ce(e,t,n))),o=p(i,(()=>-1))),o.length>1&&(o=p(o,((e,t,r)=>{const o=0===ce(e,r,n),i=0===ce(t,r,n);if(o){if(!i)return 1}else if(i)return-1;if(e.length>t.length)return-1;if(t.length>e.length)return 1;if(0===ce(e,t,n)){const r=le(e,t,n);if(0!==r)return r}return o?-1:0}),(e=>ue(e,n)))),o.length>1){let e=o[0].match(/([^\p{L}\p{N}]+)$/u);if(e)for(let n=1;n<o.length;n++)if(!o[n].endsWith(e[1])){e=null;break}e&&(o=o.map((n=>n.slice(0,-e[1].length))),o.suffix=e[1])}return o.flags="ja"===n?o.map((e=>pe(e))).reduce(((e,n)=>e|n),0):0,o},ge={size:0},me=(e,n,t,o)=>{if(!e[n])return[];if(i(e[n].solutions))return e[n].solutions;let s=[];for(const o of Object.keys(e[n])){const i=Number(o),a=e[n][i];let l;l=0===a.length?r:a.suffix?e=>({token:a,next:{token:[a.suffix],next:e,size:e.size+1},size:e.size+2}):e=>({token:a,next:e,size:e.size+1});const c={reference:a[0]||"",flags:a.flags,isComplex:a.length>1},u=me(e,i,t);if(u.length>0)for(const e of u)s.push({locale:t,reference:c.reference+e.reference,flags:c.flags|e.flags,isComplex:c.isComplex||e.isComplex,tokens:l(e.tokens)});else i===e.length-1&&(c.locale=t,c.tokens=l(ge),s.push(c))}return e[n].solutions=s,s},ve=(e,n)=>e.map((e=>({sentence:e,flags:he(e)}))),ye=(e,n,t)=>{const r={locale:t,patterns:[]},o=se(t);let i;i="ja"===t?ve(e.map((e=>e.normalize("NFC")))):e.map((e=>({sentence:e.normalize("NFC"),flags:0})));const s=e=>{return(n=e,o?n.split(/([^\p{L}\p{N}]+)/u):[n]).filter((e=>""!==e));var n};for(const{sentence:e,flags:n}of i){let i=0;const a=[],l=[],c=e.matchAll(o?/([^\s[]*\[[^[]+\][^\s[]*)+/gu:/\[([^\]]+)\]/gu);for(const n of c){if(n.index>i){const t=e.substring(i,n.index);if(""!==t){const e=s(t);l.push(...e)}}let r;const c=o&&(0===l.length||!!l.at(-1).match(/\p{Sentence_Terminal}\s*$/gu));if(o){r=[""];let e=0;const o=n[0].matchAll(/\[([^[]+)]/g);for(const t of o){if(t.index>e){const o=n[0].substring(e,t.index);r=r.map((e=>e+o))}const o=t[1].split(/\//);r=o.flatMap((e=>r.map((n=>n+e)))),e=t.index+t[0].length}if(e<n[0].length){const[,t,o]=n[0].substring(e).match(/(.*?)([^\p{L}\p{N}]*)$/u);r=r.map((e=>e+t)),o.length>0&&(n[0]=n[0].slice(0,-o.length))}r.sort(((e,n)=>w(e,n,t))),r=h(r.map(s),(e=>e.length))}else r=h(n[1].split(/\//).map(s),(e=>e.length));const u=[],f=Object.entries(r);for(const[e,n]of f){const r=Number(e);if(r>1){const e=Array.from(n.keys()),i=Object.values(h(e,(e=>n[e].slice(1).join("")))).filter((e=>e.length>1)),s=Object.values(h(e,(e=>n[e].slice(0,-1).join("")))).filter((e=>e.length>1)),a=new Set;if(o&&r>=3){const t=Object.values(h(e,(e=>n[e].slice(1,-1).join("")))).filter((e=>e.length>1));for(const e of t){const t=Object.values(h(e,(e=>n[e].slice(1).join("")))).filter((e=>e.length>1)).map((e=>e.map((e=>n[e][1].match(/\s/)&&n[e][0])).filter(Boolean))),r=Object.values(h(Array.from(t.keys()),(e=>t[e].join("/")))).filter((e=>e.length>1));for(const e of r)u.push({sharedTokens:n[i[e[0]][0]].slice(1,-1),firstChoice:i[e[0]].map((e=>n[e][0])),lastChoice:e.map((e=>n[i[e][0]].at(-1)))}),e.flatMap((e=>i[e])).forEach((e=>a.add(e)))}}for(let e of i)if(e=e.filter((e=>!a.has(e))),e.length>1){const r=e.map((e=>n[e][0])).sort(((e,n)=>w(e,n,t)));u.push({sharedTokens:n[e[0]].slice(1),firstChoice:r,lastChoice:[]}),e.forEach((e=>a.add(e)))}for(let e of s)if(e=e.filter((e=>!a.has(e))),e.length>1){const r=e.map((e=>n[e].at(-1))).sort(((e,n)=>w(e,n,t)));u.push({sharedTokens:n[e[0]].slice(0,-1),firstChoice:[],lastChoice:r}),e.forEach((e=>a.add(e)))}for(const t of e)a.has(t)||u.push({sharedTokens:n[t],firstChoice:[],lastChoice:[]})}else{const t=c&&0===r&&f.every((n=>n[0]===e||n[1].some((e=>{var n;return null===(n=e[0])||void 0===n?void 0:n.match(/^\s*[\p{N}\p{Lu}]/gu)}))));u.push({sharedTokens:[],firstChoice:n.flat(),lastChoice:[],shouldTitleCaseNextNonSpaceToken:t})}}a.push({branches:u,tokenPosition:l.length}),i=n.index+n[0].length}if(i<e.length){const n=s(e.substring(i));l.push(...n)}let u=1;for(let e=a.length-1;e>=0;e--){a[e].branchSize=u,u=a[e].branches.length*u;for(const n of a[e].branches)1===n.firstChoice.length&&n.sharedTokens.unshift(n.firstChoice.pop()),1===n.lastChoice.length&&n.sharedTokens.push(n.lastChoice.pop())}r.patterns.push({flags:n,size:u,branchSets:a,sharedTokens:l})}r.size=r.patterns.reduce(((e,n)=>e+n.size),0);const a=[];for(let e=0;e<r.size;e++)a.push(Ce(r,e));return ce.clearCache(),a},we=(e,n,t)=>{let r=e.filter(o).map((e=>e.trim())).filter((e=>""!==e)).map(y);return r="ja"===t?ve(r):r.map((e=>({sentence:e,flags:0}))),r.map((({sentence:e,flags:n})=>{const r=y(e),o=r.split(/([\p{L}\p{N}]+)/gu).map((e=>[e]));return{locale:t,reference:r,tokens:o,flags:n,isComplex:!1}}))},xe=(e,n,t)=>{const r=[];let o=0,s="",a=!1,l=!1;const c=e=>{i(e)?(l&&(l=!1,e=e.map((e=>e.replace(/[\p{L}\p{N}]/u,(e=>e.toLocaleUpperCase(t)))))),r.push(e),s+=e[0]):(l&&""!==e.trim()&&(l=!1,e=e.replace(/[\p{L}\p{N}]/u,(e=>e.toLocaleUpperCase(t)))),s+=e,r.push([e]))};for(const t of e.branchSets){for(let n=o;n<t.tokenPosition;n++)c(e.sharedTokens[n]);const r=t.branches[Math.floor(n/t.branchSize)];if(r.firstChoice.length>0&&(a=!0,c(r.firstChoice.sort(ce))),r.sharedTokens.length>0)for(const e of r.sharedTokens)c(e);r.lastChoice.length>0&&(a=!0,c(r.lastChoice.sort(ce))),o=t.tokenPosition,n%=t.branchSize,l=l||!!r.shouldTitleCaseNextNonSpaceToken}for(let n=o;n<e.sharedTokens.length;n++)c(e.sharedTokens[n]);return{locale:t,reference:s,tokens:r,isComplex:a,flags:e.flags}},Ce=(e,n)=>{for(const t of e.patterns){if(!(n>=t.size))return xe(t,n,e.locale);n-=t.size}return null},be=Symbol("summary"),ke=M(((e,n)=>x(y(e,!0,!1).toLocaleLowerCase(n)))),Se=M(((e,n)=>x(y(e,!0,!0).toLocaleLowerCase(n)))),Ae=(e,n,t)=>{const r=new Set,o=e.tokens.map((n=>n.map((e=>e.trim())).filter((e=>""!==e)).map((n=>{const o=((e,n,t)=>t.ignoreDiacritics?Se(e,n):ke(e,n))(n,e.locale,t);return o.forEach((e=>r.add(e))),o})))).filter((e=>e.length>0));e.matchingData={id:n,tokens:o,words:Array.from(r)}},Ne=(e,n,t)=>{var r;const o=y((e=>{if(!e[be]){const n=se(e.locale)?"":" ";e[be]=e.tokens.reduce(((e,t)=>e+(1===t.length?t[0]:`${n}[${n}${t.join(" / ")}${n}]${n}`)),"")}return e[be]})(e),!0,t.ignoreDiacritics).toLocaleLowerCase(e.locale),i=(null===(r=/^[^\p{L}\p{N}]*(.*?)[^\p{L}\p{N}]*?$/gu.exec(o))||void 0===r?void 0:r[1])||o;e.matchingData={id:n,summary:i}},ze={charCount:0,wordCount:0,bigramMap:new Map},Le=Symbol("word_stats"),je=e=>({charCount:e.length,wordCount:1,bigramMap:C(e)}),Me=e=>0===e.length?ze:{charCount:f(e,(e=>e.charCount)),wordCount:f(e,(e=>e.wordCount)),bigramMap:d(((e,n)=>e+n),...e.map((e=>e.bigramMap)))},Ee=e=>{if(!e.matchingData)return{shared:ze};if(!e[Le]){const{false:t=[],true:r=[]}=h(e.matchingData.tokens,(e=>e.length>1));e[Le]={shared:Me(t.flatMap((e=>e[0].map((e=>je(e))))))};const o=r.map((e=>e.map((e=>Me(e.map((e=>je(e))))))));if(o.length>0){const t=(e=>{const t=[];return n(e).forEach((e=>t.push(e))),t})(o);e[Le].paths=t.map(Me)}}return e[Le]},Oe=(e,n,t)=>{const r=Ee(e),o=Me(((e,n,t)=>x(y(e,!0,t.ignoreDiacritics).toLocaleLowerCase(n)))(n,e.locale,t).map(je)),i=o.charCount+r.shared.charCount,s=o.wordCount+r.shared.wordCount;let a=0;for(const[e,n]of o.bigramMap){const t=r.shared.bigramMap.get(e)||0;t>0&&(a+=Math.min(n,t),o.bigramMap.set(e,Math.max(0,n-t)))}return r.paths?r.paths.map((e=>{let n=0;for(const[t,r]of o.bigramMap){const o=e.bigramMap.get(t)||0;o>0&&(n+=Math.min(r,o))}const t=i+e.charCount,r=s+e.wordCount;return 2*(a+n)/(t-r)})):[2*a/(i-s)]},Te=(e,n)=>(e.type&n)>0,_e=e=>e.key||`_duo-sv_-${e.type}-${e.statement}`,getParsedSolutionList=(e,n)=>{if(e.solutions.parsed)return e.solutions;let t;const{locale:r,metadata:o}=e.solutions,i=getAvailableSolutionListTypes(e);return i.includes(n)||(n=i[0]??null),t=z===n?((e,n,t)=>{const r=e.map((e=>h(e.filter((e=>{return!(n=e).auto&&"typo"!==n.type;var n})),(e=>e.to))));for(let e=0;e<r.length;++e){const o={};for(const[i,s]of Object.entries(r[e]))o[i]=de(s.map((e=>String(e.orig||e.lenient||""))),n,t);r[e]=o}let o=me(r,0,n);for(const e of o){let n=0,t=e.tokens;const r=new Array(e.tokens.size);for(;t.token;)r[n++]=t.token,t=t.next;e.tokens=r}return o=Object.values(h(o,(e=>e.reference))).flatMap((e=>e.length<=1?e:e.some((e=>e.isComplex))?e.filter((e=>e.isComplex)):e.slice(-1))),le.clearCache(),ce.clearCache(),o})(e.solutions.graph,r,o.isWhitespaceDelimited||se(r)):N===n?ye(e.solutions.patterns,0,r):[],{parsed:!0,locale:r,type:n,list:t}},getAvailableSolutionListTypes=e=>e.solutions.parsed&&[e.solutions.type]||[e.solutions.graph&&z,e.solutions.patterns&&N].filter(o),addSimilarityScoresToSolutionList=(e,n)=>{(e=>{if(!s(e.matchingData)){if(!e.parsed)throw new Error("Cannot add matching data to an unparsed solution list.");const n=e.locale,t={ignoreDiacritics:!1,ignoreWordOrder:!0};if(e.matchingData={matchingOptions:t,locale:n},se(n)){const n=new Set;e.list.forEach(((e,r)=>{Ae(e,r,t);for(const t of e.matchingData.words)n.add(t)})),e.matchingData.words=Array.from(n)}else e.list.forEach(((e,n)=>Ne(e,n,t)))}})(e),""!==n&&e.matchingData.words&&e.list.forEach((t=>{t.score=((e,n,t)=>u(Oe(e,n,t)))(t,n,e.matchingData.matchingOptions)}))},getUiChallengeSolutionList=e=>{const n=s(e.grader)?e.grader:{},t=s(e.metadata)?{...e.metadata}:{},r=String(e.targetLanguage||n.language||t.target_language||t.language||"").trim(),a=(e,n=N)=>({parsed:!0,locale:r,type:n,list:e});if(i(e.correctSolutions)&&S.includes(e.type))return a(we(e.correctSolutions,0,r));const l=i(e.compactTranslations)&&e.compactTranslations.length>0,c=s(n)&&i(n.vertices)&&n.vertices.length>0;if(c||l){const o={parsed:!1,locale:r,metadata:t};return c&&(o.graph=n.vertices,t.isWhitespaceDelimited=!!n.whitespaceDelimited),l&&(o.patterns=e.compactTranslations),o}return o(e.prompt)&&""!==e.prompt&&k.includes(e.type)?a(we([e.prompt],0,r)):i(e.correctTokens)&&A.includes(e.type)?a(((e,n,t)=>we(e.filter(o).join(" "),0,t))(e.correctTokens,0,r)):null},Pe=e=>{var n;return`${String((null===(n=e.tab)||void 0===n?void 0:n.id)||"global")}-${String(e.frameId||"main")}`},Fe=[],He={},De=[],$e=(e,n,t)=>i(Fe[e])?Fe[e].find((e=>Te(e,n)&&t(e))):null,Ie=async(e,n,t,o)=>{const i=((e,n,t)=>e.map((e=>{const r=getUiChallengeSolutionList(e);if(r){const o=String(e.id||Math.floor(Math.random()*Number.MAX_SAFE_INTEGER)).trim(),i=y(String(e.prompt||""));if(""!==i&&b.includes(e.type))return{key:o,type:S.includes(e.type)?3:1,statement:i,solutions:r,fromLanguage:n,toLanguage:t};if(k.includes(e.type)&&""!==String(e.solutionTranslation||"").trim()){const s=y(String(e.solutionTranslation)),a=String(e.tts||"").trim(),l=String(e.slowTts||"").trim();return{key:o,type:4,statement:i,solutions:r,fromLanguage:n,toLanguage:t,solutionTranslation:s,ttsMediaUrl:a,slowTtsMediaUrl:l}}}})).filter(s))(n,t,o);Fe[e]=function(e,n,t=r){if(e.length<=1)return e.slice();const o=new Map;for(const r of e){const e=t(r);o.has(e)?1===n(o.get(e),r,e)&&(o.delete(e),o.set(e,r)):o.set(e,r)}return Array.from(o.values())}((Fe[e]||[]).concat(i).splice(-200),(()=>1),(e=>_e(e)))},getChallengeParsedSolutionList=(e,n)=>{if(e.solutions.parsed)return e.solutions;const t=_e(e),r=De.find((e=>e.key===t&&e.type===n));if(r)return r.list;const o=getParsedSolutionList(e,n);return o.otherTypes=getAvailableSolutionListTypes(e).filter((e=>e!==o.type)),De.splice(0,Math.max(0,De.length+1-4)),De.push({key:t,type:n,list:o}),o},qe=async(e,n,t)=>{if(s(n)){let r,a=()=>!0;const l=o(n.userAnswer)?y(n.userAnswer):"";if(o(n.solutionTranslation)&&""!==n.solutionTranslation){const e=y(n.solutionTranslation);a=n=>e===n.solutionTranslation}if(r=((e,n,t)=>i(Fe[e])?Fe[e].filter((e=>Te(e,n)&&t(e))):[])(e,4,a),0===r.length)return;let c=null;if(o(n.solutionTranslation)&&""!==n.solutionTranslation&&1===r.length)c=r.pop();else{const n=He[e];c=He[e]&&r.find((e=>{return r=n,!!(t=e).ttsMediaUrl&&t.ttsMediaUrl===r.ttsMediaUrl||!!t.slowTtsMediaUrl&&t.slowTtsMediaUrl===r.slowTtsMediaUrl;var t,r}))}if(!s(c))return;const u=getChallengeParsedSolutionList(c,n.listType||N);addSimilarityScoresToSolutionList(u,l);const f={challenge:{...r,solutions:u}};""!==l&&"correct"===n.result&&(c.solutions.locale,u.matchingData.matchingOptions),t(f)}};var Re;Re=async(e,n,t,r)=>{switch(e){case"get_current_translation_challenge":await(async(e,n,t)=>{if(s(n)&&o(n.statement)&&i(Fe[e])){const r=y(n.statement),i=o(n.userAnswer)?y(n.userAnswer):"";let a=$e(e,1,(e=>r===e.statement));if(a||(a=$e(e,3,r.includes((e=>e.statement)))),!s(a))return;const l=getChallengeParsedSolutionList(a,n.listType||N);addSimilarityScoresToSolutionList(l,i),t({...a,solutions:l})}})(Pe(t),n,r);break;case"get_current_listening_challenge":await qe(Pe(t),n,r);break;case"get_challenge_by_key":case"update_current_challenge_user_reference":await(async(e,n,t)=>{if(s(n)&&o(n.key)&&o(n.userReference)){const r=n.userReference.trim(),o=$e(e,1,(e=>_e(e)===n.key));if(s(o)){const e=getChallengeParsedSolutionList(o,n.listType||N);addSimilarityScoresToSolutionList(e,r),t({challenge:{...o,solutions:e},userReference:r})}}})(Pe(t),n,r)}},chrome.runtime.onMessage.addListener(((e,n,t)=>{if(m===e.type){let r=!1;const o=e=>{r=!0,t({type:"success",value:e})},i=e=>{r=!0,t({type:"failure",error:e})};try{Promise.resolve(Re(e.action,e.value,n,o,i)).then((()=>{if(!r)throw new Error(`Could not handle action request: "${e.action}".`)})).catch((e=>{r||i(e)}))}catch(e){!r&&i(e)}return!0}})),(e=>{chrome.runtime.onMessage.addListener(((n,t)=>{v===n.type&&e(n.event,n.value,t)}))})((async(e,n,t)=>{switch(e){case"session_loaded":await(async(e,n)=>{if(s(n)){const t=s(n.sessionMetaData)?n.sessionMetaData:{},r=i(n.challenges)?n.challenges:[];await Ie(e,r,String(t.ui_language||t.from_language||n.fromLanguage||"").trim(),String(t.language||t.learning_language||n.learningLanguage||"").trim())}})(Pe(t),n);break;case"sound_played":((e,n)=>{if(o(n)){const t=n.trim();if(""!==t){const n=$e(e,4,(e=>t===e.ttsMediaUrl||t===e.slowTtsMediaUrl));s(n)&&(He[e]=n)}}})(Pe(t),n)}}))}();
